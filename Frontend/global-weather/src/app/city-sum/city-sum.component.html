<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    
</head>
<body>
    
   
    <main>
        <div class="container">
            <div class = "left-container">
                <section class="current-weather" (click) = "onWeatherDetail()">
                    <h2>Current Weather</h2>
                    <div class="current-weather-box">
                        <div class="current-weather-left">
                            <p><strong> {{weather.location.name}}</strong></p>
                            <img [src]="weather.current.condition.icon" alt="Weather Icon">
                            <p> {{weather.current.temp_c}} °C</p>
                            <p> {{weather.current.condition.text}}</p>
                        </div>
                        <div class="current-weather-right">
                            <p><strong>Humidity:</strong> %{{weather.current.humidity}}</p>
                            <p><strong>Feels Like:</strong> {{weather.current.feelslike_c}} °C</p>
                            <p><strong>Cloud Cover:</strong> %{{weather.current.cloud}}</p>
                            <p><strong>Wind Speed:</strong> {{weather.current.wind_kph}} km/h</p>
                        </div>
                    
                    </div>
                    <p>Last update: {{weather.current.last_updated}} local time </p>
                    
                </section>
                
                <section class="forecast" (click) = "onForecast()">
                        <h2>7-Day Forecast</h2>
                        <br>
                        <div class = "forecast-days">
                            <div class="forecast-info" *ngFor="let forecastday of forecastdays">
                                
                                <h5> {{ forecastday.date }}</h5>
                                <img [src]="forecastday.day.condition.icon" alt="Weather Icon">
                                <p> {{ forecastday.day.maxtemp_c }}/{{ forecastday.day.mintemp_c }}°C</p>
                                
                            </div>
                        </div>
                </section>
            </div>

            <div class="right-container">
                <section class="astro" (click) = "onAstro()">
                        <h2>Day-Night</h2>
                        <br>
                        
                        <div class="astro-info" >
                                
                            <p> <strong>Sunrise:</strong> {{ forecastdays[0].astro.sunrise }}</p>
                            <p><strong> Sunset: </strong>{{ forecastdays[0].astro.sunset }}</p>
                            <p><strong> Moonrise: </strong>{{ forecastdays[0].astro.moonrise }}</p>
                            <p><strong> Moonset: </strong>{{ forecastdays[0].astro.moonset }}</p>
                            
                            
                                
                        </div>
                        
                </section>
                <section class="air-quality" (click) = "onAir()">
                    <h2>Air Quality</h2>
                    <div class ="air-quality-box">
                        <p><strong>EPA Index: </strong> {{weather.current.air_quality['us-epa-index']}}</p>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 1" [style.color]="getAirColor(1)">
                            Air quality is good.
                        </div>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 2" [style.color]="getAirColor(2)">
                            Air quality is moderate.
                        </div>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 3" [style.color]="getAirColor(3)">
                            Air quality is unhealthy for sensitive groups.
                        </div>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 4" [style.color]="getAirColor(4)">
                            Air quality is unhealthy.
                        </div>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 5" [style.color]="getAirColor(5)">
                            Air quality is very unhealthy.
                        </div>
                        <div *ngIf="weather.current.air_quality['us-epa-index'] === 6" [style.color]="getAirColor(6)">
                            Air quality is hazardous.
                        </div>
                    </div>
                </section>
                <section class="map">
                    <iframe
                    width="450"
                    height="300"
                    style="border:0"
                    loading="lazy"
                    allowfullscreen
                    referrerpolicy="no-referrer-when-downgrade"
                    [src]="map | safe">
                    </iframe>
                </section>
            </div>
        </div>
        
        

            
       
        

    
        
    </main>
    
</body>

